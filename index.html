
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Vergi Avantajı Hesaplayıcı</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f4f4f4; }
        .container { background: white; padding: 20px; border-radius: 10px; max-width: 800px; margin: auto; }
        h1 { color: #2c3e50; }
        label { display: block; margin-top: 10px; }
        input, select, button { width: 100%; padding: 10px; margin-top: 5px; }
        .button-group button {
            width: 23%;
            margin-right: 2%;
            margin-top: 10px;
        }
        .selected { background-color: #3498db; color: white; }
        .results { margin-top: 20px; }
        canvas { max-width: 100%; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Vergi Avantajı Hesaplayıcı</h1>

        <label>Alış Fiyatı (KDV ve ÖTV dahil):</label>
        <input id="alisFiyati" placeholder="Örn: 1.200.000" oninput="formatNumber(this)">

        <label>Satış Fiyatı:</label>
        <input id="satisFiyati" placeholder="Örn: 1.350.000" oninput="formatNumber(this)">

        <label>Satış Süresi:</label>
        <div class="button-group" id="sureButtons">
            <button onclick="selectSure(this, 6)">6 Ay</button>
            <button onclick="selectSure(this, 12)">12 Ay</button>
            <button onclick="selectSure(this, 18)">18 Ay</button>
            <button onclick="selectSure(this, 24)">24 Ay</button>
        </div>

        <label>Motor Hacmi:</label>
        <div class="button-group" id="motorButtons">
            <button onclick="selectMotor(this, '1300')">≤1300</button>
            <button onclick="selectMotor(this, '1600')">≤1600</button>
            <button onclick="selectMotor(this, '2000')">≤2000</button>
            <button onclick="selectMotor(this, '2500')">≤2500</button>
        </div>

        <button onclick="hesapla()">Hesapla</button>

        <div class="results" id="sonuc"></div>
        <canvas id="grafik"></canvas>
    </div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let secilenSure = 6;
let secilenMotor = '1300';

function selectSure(btn, sure) {
    document.querySelectorAll("#sureButtons button").forEach(b => b.classList.remove("selected"));
    btn.classList.add("selected");
    secilenSure = sure;
}

function selectMotor(btn, motor) {
    document.querySelectorAll("#motorButtons button").forEach(b => b.classList.remove("selected"));
    btn.classList.add("selected");
    secilenMotor = motor;
}

function formatNumber(el) {
    let val = el.value.replace(/[^0-9]/g, '');
    el.value = Number(val).toLocaleString('tr-TR');
}

function parseNumber(str) {
    return parseFloat(str.replace(/\./g, '').replace(',', '.'));
}

function hesapla() {
    const alis = parseNumber(document.getElementById('alisFiyati').value || '0');
    const satis = parseNumber(document.getElementById('satisFiyati').value || '0');

    let amortismanOran = 0.5; // hızlandırılmış amortisman
    let amortisman = (alis * amortismanOran) * (secilenSure / 12);
    let yakit = 15000;
    let sigorta = 10000;
    let mtv = 8421;

    let toplamGider = amortisman + yakit + sigorta + mtv;
    let giderYazilabilir = toplamGider * 0.7;
    let vergiAvantaji = giderYazilabilir * 0.25;

    let sonucDiv = document.getElementById('sonuc');
    sonucDiv.innerHTML = `
        <strong>Toplam Gider:</strong> ${toplamGider.toLocaleString('tr-TR')} ₺<br>
        <strong>Vergiden Düşülebilir Tutar:</strong> ${giderYazilabilir.toLocaleString('tr-TR')} ₺<br>
        <strong>Vergi Avantajı:</strong> ${vergiAvantaji.toLocaleString('tr-TR')} ₺<br>
    `;

    const ctx = document.getElementById('grafik').getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Amortisman', 'Yakit', 'Sigorta', 'MTV'],
            datasets: [{
                label: 'Giderler',
                data: [amortisman, yakit, sigorta, mtv],
                backgroundColor: ['#3498db', '#2ecc71', '#f1c40f', '#e74c3c']
            }]
        }
    });
}
</script>
</body>
</html>
