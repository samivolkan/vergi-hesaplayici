
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vergi AvantajÄ± HesaplayÄ±cÄ±</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; background: #f1f4f9; margin: 0; padding: 2rem; }
        h2 { margin-bottom: 1rem; }
        .container { display: flex; gap: 2rem; flex-wrap: wrap; }
        .card { background: white; border-radius: 12px; padding: 1rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1); flex: 1; min-width: 320px; }
        .button-group { display: flex; gap: 1rem; margin-bottom: 1rem; }
        .select-button {
            flex: 1; padding: 10px; border: 1px solid #ccc; background: #eee;
            border-radius: 6px; text-align: center; cursor: pointer;
        }
        .select-button.active { background-color: #d1eaff; border-color: #4ca0ff; font-weight: bold; }
        label, input { display: block; margin-bottom: 0.5rem; width: 100%; }
        input { padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; }
        canvas { margin-top: 2rem; }
    </style>
</head>
<body>
    <h2>Åžirket AracÄ± / Motoru Vergi AvantajÄ± HesaplayÄ±cÄ±</h2>
    <div class="container">
        <div class="card">
            <div class="button-group">
                <div class="select-button active" onclick="setType('Motor')" id="btnMotor">ðŸ›µ Motor</div>
                <div class="select-button" onclick="setType('AraÃ§')" id="btnArac">ðŸš— AraÃ§</div>
            </div>
            <input id="bedel" type="text" placeholder="KDV Dahil AlÄ±ÅŸ Bedeli">
            <input id="satis" type="text" placeholder="SatÄ±ÅŸ Bedeli">
            <input id="sure" type="number" placeholder="KullanÄ±m SÃ¼resi (ay)">
            <input id="otv" type="text" placeholder="Ã–TV">
            <input id="mtv" type="text" placeholder="MTV">
            <input id="sigorta" type="text" placeholder="Sigorta">
            <input id="bakim" type="text" placeholder="BakÄ±m Gideri">
        </div>
        <div class="card">
            <canvas id="myChart"></canvas>
        </div>
    </div>

    <script>
        let alimTuru = "Motor";

        function setType(type) {
            alimTuru = type;
            document.getElementById("btnMotor").classList.remove("active");
            document.getElementById("btnArac").classList.remove("active");
            document.getElementById("btn" + type).classList.add("active");
            calculate();
        }

        function parseTL(val) {
            return parseFloat(val.replaceAll(".", "").replace(",", ".")) || 0;
        }

        function formatTL(number) {
            return number.toLocaleString("tr-TR");
        }

        const inputs = document.querySelectorAll("input");
        inputs.forEach(input => {
            input.addEventListener("input", () => {
                const val = parseTL(input.value);
                input.value = val ? formatTL(val) : "";
                calculate();
            });
        });

        let chart;
        function calculate() {
            const bedel = parseTL(document.getElementById("bedel").value);
            const satis = parseTL(document.getElementById("satis").value);
            const sure = parseFloat(document.getElementById("sure").value);
            const otv = parseTL(document.getElementById("otv").value);
            const mtv = parseTL(document.getElementById("mtv").value);
            const sigorta = parseTL(document.getElementById("sigorta").value);
            const bakim = parseTL(document.getElementById("bakim").value);

            const amortisman = (bedel - otv) * (sure / 60);
            const giderToplam = amortisman + otv + mtv + sigorta + bakim;
            const kazanc = satis - (bedel - amortisman);
            const vergiAvantaji = giderToplam * 0.22; // %22 kurumlar vergisi avantajÄ±

            const data = {
                labels: ["Net KÃ¢r", "Vergi AvantajÄ±", "Toplam Gider"],
                datasets: [{
                    label: "â‚º",
                    data: [kazanc, vergiAvantaji, giderToplam],
                    backgroundColor: ["#4caf50", "#2196f3", "#f44336"]
                }]
            };

            if (chart) chart.destroy();
            const ctx = document.getElementById("myChart").getContext("2d");
            chart = new Chart(ctx, {
                type: "bar",
                data,
                options: {
                    responsive: true,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true } }
                }
            });
        }

        window.onload = calculate;
    </script>
</body>
</html>
