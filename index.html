
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Vergi HesaplayÄ±cÄ± V11</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        .container { display: flex; flex-direction: column; gap: 12px; max-width: 800px; margin: auto; }
        .row { display: flex; justify-content: space-between; gap: 10px; }
        input[type='number'], select { flex: 1; padding: 8px; }
        button { padding: 10px; cursor: pointer; }
        #chartContainer { margin-top: 20px; }
        .highlight { background-color: #e0ffe0; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h2>ðŸš— Vergi AvantajÄ± HesaplayÄ±cÄ± â€“ SÄ±fÄ±r AraÃ§lar Ä°Ã§in (V11)</h2>
        <div class="row">
            <label>AlÄ±ÅŸ FiyatÄ± (KDV+Ã–TV Dahil):</label>
            <input type="text" id="alisFiyati" placeholder="Ã–rn: 1.200.000">
        </div>
        <div class="row">
            <label>SatÄ±ÅŸ FiyatÄ± (KDV Dahil):</label>
            <input type="text" id="satisFiyati" placeholder="Ã–rn: 1.400.000">
        </div>
        <div class="row">
            <label>Motor Hacmi:</label>
            <select id="motorHacmi">
                <option value="0.45">â‰¤1600 cmÂ³ â€“ %45</option>
                <option value="0.60">â‰¤1600 cmÂ³ â€“ %60</option>
                <option value="0.80">>1600 cmÂ³ â€“ %80</option>
            </select>
        </div>
        <div class="row">
            <label>SatÄ±ÅŸ SÃ¼resi:</label>
            <select id="satisSuresi">
                <option value="6">6 Ay</option>
                <option value="12">12 Ay</option>
                <option value="18">18 Ay</option>
                <option value="24">24 Ay</option>
            </select>
        </div>
        <div class="row">
            <label>YÄ±llÄ±k Giderler (Toplam):</label>
            <input type="text" id="yillikGider" placeholder="Ã–rn: 50.000">
        </div>
        <div class="row">
            <button onclick="hesapla()">Vergi AvantajÄ±nÄ± Hesapla</button>
            <button onclick="indirPDF()">ðŸ“„ PDF Ä°ndir</button>
        </div>
        <div id="aiOutput" class="highlight"></div>
        <div id="sonuc" style="margin-top: 20px;"></div>
        <div id="chartContainer">
            <canvas id="vergiChart" width="700" height="300"></canvas>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function parseNumber(value) {
            return parseFloat(value.replace(/,/g, '').replace(/\./g, ''));
        }

        function hesapla() {
            const alis = parseNumber(document.getElementById("alisFiyati").value || "0");
            const satis = parseNumber(document.getElementById("satisFiyati").value || "0");
            const otvOrani = parseFloat(document.getElementById("motorHacmi").value || "0");
            const kdvOrani = 0.20;
            const amortismanSuresi = parseInt(document.getElementById("satisSuresi").value);
            const gider = parseNumber(document.getElementById("yillikGider").value || "0");

            const otv = alis * (otvOrani / (1 + otvOrani + kdvOrani));
            const kdv = alis * (kdvOrani / (1 + otvOrani + kdvOrani));
            const netAlis = alis - otv - kdv;

            const amortismanOrani = amortismanSuresi >= 12 ? 1 : amortismanSuresi / 12 * 2;
            const amortisman = Math.min(netAlis, 1100000) * amortismanOrani;

            const giderToplam = gider;
            const giderAvantaji = (amortisman + giderToplam) * 0.25;
            const satisKdv = satis * (kdvOrani / (1 + kdvOrani));

            const toplamAvantaj = giderAvantaji - satisKdv;

            document.getElementById("sonuc").innerHTML = `
                <h3>ðŸ“Š Hesaplama Sonucu</h3>
                <ul>
                    <li>Ã–TV: ${otv.toFixed(0)} TL</li>
                    <li>KDV: ${kdv.toFixed(0)} TL</li>
                    <li>Amortisman: ${amortisman.toFixed(0)} TL</li>
                    <li>Gider AvantajÄ±: ${giderAvantaji.toFixed(0)} TL</li>
                    <li>SatÄ±ÅŸ KDV YÃ¼kÃ¼: ${satisKdv.toFixed(0)} TL</li>
                    <li><strong>ðŸ’¸ Toplam Vergi AvantajÄ±: ${toplamAvantaj.toFixed(0)} TL</strong></li>
                </ul>
            `;

            const ctx = document.getElementById('vergiChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Amortisman', 'Gider AvantajÄ±', 'SatÄ±ÅŸ KDV'],
                    datasets: [{
                        label: 'Vergi Kalemleri (TL)',
                        data: [amortisman, giderAvantaji, satisKdv],
                        backgroundColor: ['#4caf50', '#2196f3', '#f44336']
                    }]
                }
            });

            document.getElementById("aiOutput").innerText = "ðŸ¤– Yapay Zeka Tavsiyesi: 12 ay sonunda satÄ±ÅŸ, maksimum vergi avantajÄ± saÄŸlar.";
        }

        function indirPDF() {
            window.print();
        }
    </script>
</body>
</html>
